window.AlipayH5Share||function(){var e={};var t={title:"",imgUrl:"",desc:"",ready:false};var n={title:false,imgUrl:false,desc:false};var r;var i={init:function(){var e=this;e.collectTitle();e.collectDesc();e.collectThumbnail()},collectTitle:function(){var e=this;if(n.title){return}if(document.title&&document.title.trim()!==""){t.title=e.contentTidy(document.title);n.title=true;e.collectReady()}else if(document.getElementsByTagName("H1").length>0&&document.getElementsByTagName("H1")[0].textContent.length>0){var r=e.nodeStrFliter(document.getElementsByTagName("H1")[0]);if(e.getStrLen(r)<=64&&r.length>0){t.title=r;n.title=true;e.collectReady()}}},collectThumbnail:function(){var e=this;n.imgUrl=false;e.collectReady();r=Array.prototype.slice.call(document.images);e.findImgUrl()},findImgUrl:function(){var e=i,s=200,o=50;if(r.length===0){n.imgUrl=true;e.collectReady();return}if(r.length>0&&!n.imgUrl){for(var u=0;u<r.length;u++){var a=r[u];if(a.complete||a.natureWidth){if(a.naturalWidth>=s&&a.naturalHeight>=o){t.imgUrl=a.src;n.imgUrl=true;e.collectReady();r=[];break}}}}},collectDesc:function(){if(n.desc){return}var e=this,r=Array.prototype.slice.call(document.getElementsByTagName("P"));if(r.length>0){for(var i=0;i<r.length;i++){var s=r[i].textContent;if(r[i].id=="Debug"){continue}if(e.getStrLen(s)>=50&&e.getStrLen(s)<=2e3){s=e.nodeStrFliter(r[i],false);if(e.getStrLen(s)>=50&&e.getStrLen(s)<=2e3){t.desc=s;n.desc=true;e.collectReady();break}}}}if(!n.desc){e.travelDocument(document.body)}if(!n.desc){var o=document.querySelector('meta[name="description"]');if(o&&o.getAttribute("content")&&o.getAttribute("content").trim()){t.desc=e.contentTidy(o.getAttribute("content"));n.desc=true;e.collectReady()}}},collectReady:function(){if(n.title&&n.imgUrl&&n.desc){t.ready=true}},travelDocument:function(e){var r=this,i=e.childNodes;if(i&&i.length>0){for(var s=0;s<i.length;s++){var o=i[s],u;switch(o.nodeType){case 1:if(o.nodeName!="P"&&o.nodeName!="SCRIPT"&&o.nodeName!="STYLE"){r.travelDocument(o)}break;case 3:u=o.nodeValue;if(r.getStrLen(u)>=50&&r.getStrLen(u)<=2e3){u=r.contentTidy(u)}if(r.getStrLen(u)>=50&&r.getStrLen(u)<=2e3){t.desc=u;n.desc=true;r.collectReady()}break}if(n.desc){break}}}},getStrLen:function(e){return e.replace(/[^\x00-\xff]/g,"xx").length},nodeStrFliter:function(e,t){t=t||true;var n=this,r=e.cloneNode(true);if(t){Array.prototype.forEach.call(r.querySelectorAll("img[alt]"),function(e){e.parentNode.replaceChild(document.createTextNode(e.alt),e)})}Array.prototype.forEach.call(r.querySelectorAll("script,style,link"),function(e){e.parentNode.replaceChild(document.createTextNode(""),e)});r=n.contentTidy(r.textContent);return r},contentTidy:function(e){return e.replace(/\s{4}/g," ").replace(/(\r|\n)/g,"").trim()}};if(/complete|loaded|interactive/.test(document.readyState)){i.init()}else{document.addEventListener("DOMContentLoaded",function(e){i.init()},true)}e.getShareContent=function(){i.init();return JSON.stringify(t)};document.addEventListener("JSPlugin_AlipayH5Share",function(e){if(AlipayJSBridge&&e.clientId){i.init();AlipayJSBridge.callback(e.clientId,t)}});window.AlipayH5Share=e}()